<link href="../polymer/polymer.html" rel="import">
<link href="../paper-shadow/paper-shadow.html" rel="import">
<link rel="import" href="../ajax-form/ajax-form.html">
<link href="paper-dialog-base.html" rel="import">
<link href="paper-action-dialog.html" rel="import">
<link rel="import" href="../juicy-html/juicy-html.html">

<polymer-element name="session-edit-dialog" extends="paper-dialog-base" role="dialog" layout vertical>

<template>

  <style>
  a {
    text-decoration: none;
    color: #5a7db2;
  }

  a:hover {
    text-decoration: underline;
  }
  :host {
    background: #fff;
    color: rgba(0, 0, 0, 0.87);
    margin: 52px;
    overflow: visible !important;
  }

  h1 {
    font-size: 1.5em;
    font-weight: 300;
  }

	h4 {
		color:#666;
		font-weight: 400;
    padding: 0;
    margin: 0;
    line-height: 2em;
	}

  #actions {
    padding: 16px;
  }

  #session-description {
    font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
  }

  #session-info-header {
  	margin-top:20px;
	}

  .cost-input {
    font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
    font-size: 1em;
    width: 150px;
    color: #555555;
    padding: 9px 8px 9px 8px;
  }

  .date-input {
    font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
    font-size: 1.3em;
    width: 35px;
    color: #555555;
    padding: 2px 8px 2px 8px;
  }

  .month-input {
    font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
    font-size: 1.3em;
    width: 70px;
    color: #555555;
    padding: 2px 8px 2px 8px;
  }

  .time-input {
    font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
    font-size: 1.3em;
    width: 65px;
    color: #555555;
    padding: 2px 8px 2px 8px;
  }

  .year-input {
    font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
    font-size: 1.3em;
    width: 60px;
    color: #555555;
    padding: 2px 8px 2px 8px;
  }
  .explanation {
    color: #000;
    font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
    font-size: 1em;
    padding-top:5px;
  }

	.info-content {
		font-size:0.8em;
	}

	.info-header {
		border-top:1px solid #d7d7d7;
	}

	.input-left {
		float:left;
		margin-right:10px;
    width:50%;
	}

  .input-left3 {
    float:left;
    margin-right:10px;
    width:40%;
  }

	.input-right {
    padding-top: 1px;
		text-align: right;
	}
	.input-row {
		margin-top:10px;
	}

	.register-input {
		font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
		font-size:1em;
		width:200px;
		color: #555555;
		padding: 9px 8px 9px 8px;
	}

  .scroller {
    overflow: auto;
    box-sizing: border-box;
    padding: 24px 24px 0 24px;
    width: 525px;
    height: 635px;
    font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
  }

  .select-box {
    font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
    font-size: 1.3em;
  }

  </style>

  <paper-shadow z="3" fit></paper-shadow>

  <!-- need this because the host needs to be overflow: visible -->
  <div id="scroller" class="scroller" relative flex auto>
    <h1>Edit Session</h1>

    <form id="register_form" is="ajax-form" action="/register_session" method="post">

    <div class="info-header">
      <h4>Session Details</h4>
    </div>

  	<div id="session-info-content" class="info-content">
      <div class="explanation">Session Type*</div>
      <select name="session-type" id="session-type-box" class="select-box">
        <option value="Classroom - Live Instructor">Classroom - Live Instructor</option>
        <option value="Classroom - Webcast Instructor">Classroom - Webcast Instructor</option>
        <option value="Online - Webcast Instructor">Online - Webcast Instructor</option>
        <option value="Online - Self Learning">Online - Self Learning</option>
      </select>

      <p>
      <div class="inputbox">
        <div class="explanation">Start and End Date*</div>
        <input name="start_day" type="number" step="1" min="1" max="31" placeholder="dd" class="date-input">
        <select name="start_month" id="session-type-box" class="month-input">
          <option value="1">Jan</option>
          <option value="2">Feb</option>
          <option value="3">Mar</option>
          <option value="4">Apr</option>
          <option value="5">May</option>
          <option value="6">Jun</option>
          <option value="7">Jul</option>
          <option value="8">Aug</option>
          <option value="9">Sep</option>
          <option value="10">Oct</option>
          <option value="11">Nov</option>
          <option value="12">Dec</option>
        </select>
        <input name="start_year" type="number" step="1" min="2015" max="2020" placeholder="yyyy" class="year-input"> to
         <input name="end_day" type="number" step="1" min="1" max="31" placeholder="dd" class="date-input">
        <select name="end_month" id="session-type-box" class="month-input">
          <option value="1">Jan</option>
          <option value="2">Feb</option>
          <option value="3">Mar</option>
          <option value="4">Apr</option>
          <option value="5">May</option>
          <option value="6">Jun</option>
          <option value="7">Jul</option>
          <option value="8">Aug</option>
          <option value="9">Sep</option>
          <option value="10">Oct</option>
          <option value="11">Nov</option>
          <option value="12">Dec</option>
        </select>
        <input name="end_year" type="number" step="1" min="2015" max="2020" placeholder="yyyy" class="year-input">
      </div>
      </p>

        <div class="input-row">
          <div class="input-left">
            <div class="explanation">Start Time (optional)</div>
          </div>
          <div>
            <div class="explanation">End Time (optional)</div>
          </div>
        </div>
        <div class="input-row">
          <div class="input-left">
            <select name="session-type" id="session-type-box" class="time-input">
              <option value="00">00</option>
              <option value="01">01</option>
              <option value="02">02</option>
              <option value="03">03</option>
              <option value="04">04</option>
              <option value="05">05</option>
              <option value="06">06</option>
              <option value="07">07</option>
              <option value="08">08</option>
              <option value="09">09</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
              <option value="13">13</option>
              <option value="14">14</option>
              <option value="15">15</option>
              <option value="16">16</option>
              <option value="17">17</option>
              <option value="18">18</option>
              <option value="19">19</option>
              <option value="20">20</option>
              <option value="21">21</option>
              <option value="22">22</option>
              <option value="23">23</option>
            </select> :
            <select name="session-type" id="session-type-box" class="time-input">
              <option value="00">00</option>
              <option value="15">15</option>
              <option value="30">30</option>
              <option value="45">45</option>
            </select>
          </div>
          <div>
            <select name="session-type" id="session-type-box" class="time-input">
              <option value="00">00</option>
              <option value="01">01</option>
              <option value="02">02</option>
              <option value="03">03</option>
              <option value="04">04</option>
              <option value="05">05</option>
              <option value="06">06</option>
              <option value="07">07</option>
              <option value="08">08</option>
              <option value="09">09</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
              <option value="13">13</option>
              <option value="14">14</option>
              <option value="15">15</option>
              <option value="16">16</option>
              <option value="17">17</option>
              <option value="18">18</option>
              <option value="19">19</option>
              <option value="20">20</option>
              <option value="21">21</option>
              <option value="22">22</option>
              <option value="23">23</option>
            </select>:
            <select name="session-type" id="session-type-box" class="time-input">
              <option value="00">00</option>
              <option value="15">15</option>
              <option value="30">30</option>
              <option value="45">45</option>
            </select>
          </div>
        </div>

      <p>
        <div class="explanation">Notes/Remarks (optional)</div>
        <textarea id="session-description" name="session_description" placeholder="Session notes/remarks" rows="2" cols="65"></textarea>
      </p>
    </div>

    <div class="info-header">
      <h4>Session Location</h4>
    </div>

    <div id="location-info-content" class="info-content">
      <div class="input-row">
        <div class="input-left">
          <div class="explanation">Metro Area*</div>
        </div>
        <div>
          <div class="explanation">Suite #/Floor/Building (if available)</div>
        </div>
      </div>
      <div class="input-row">
        <div class="input-left">
          <select name="metro" id="metro" class="select-box">
            <option value="Vancouver">Vancouver</option>
          </select>
        </div>
        <div>
          <input type="text" id="suite" name="suite" placeholder="e.g. Suite 221B, Knowledge Building" class="register-input">
        </div>
      </div>
      <div class="input-row">
        <div class="input-left">
          <div class="explanation">Street Address (if available)</div>
          <input type="text" id="street" name="street" placeholder="e.g. 100 5th Ave West" class="register-input" required>
          </div>
        <div>
          <div class="explanation">City Name (if available)</div>
          <input type="text" id="city" name="city" placeholder="e.g. Vancouver" class="register-input" value="Vancouver" required>
        </div>
      </div>
    </div>
    <div style="clear:all;margin-top:20px;"></div>

    <div class="info-header">
      <h4>Cost</h4>
    </div>

    <div id="cost-info-content" class="info-content">

      <div class="input-row">
        <div class="input-left3">
          <div class="explanation">Normal Price*</div>
        </div>
        <div class="input-left3">
          <div class="explanation">Discount Price (optional)</div>
        </div>
        <div>
          <div class="explanation">Currency*</div>
        </div>
      </div>

      <div class="input-row">
        <div class="input-left3">
          <input type="number" id="cost" name="cost" placeholder="1000.00" class="cost-input" step="0.01" min="0" required>
        </div>
        <div class="input-left3">
          <input type="number" id="cost_discount" name="cost_discount" placeholder="899.99" step="0.01" min="0" class="cost-input">
        </div>
        <div>
          <select name="currency" id="currency" class="select-box">
            <option value="CAD">CAD</option>
            <option value="USD">USD</option>
          </select>
        </div>
      </div>      
      

      <input type="hidden" id="session_id" name="session_id" value="{{sessionid}}">
      <input type="hidden" id="session_id" name="course_id" value="{{courseid}}">
    	<template is="juicy-html" content="{{ gmap }}"></template>
  	</div>
  	</form>


    <content select=":not([affirmative]):not([dismissive])"></content>
  </div>

  <div id="actions" relative layout horizontal>
    <content select="[dismissive]"></content>
    <div flex></div>
    <content select="[affirmative]"></content>
    <div id="register_buttons">
    	<paper-button dismissive on-tap="{{cancelForm}}">Cancel</paper-button>
    	<paper-button affirmative hover on-tap="{{submitForm}}">Save</paper-button>
    </div>
  </div>

</template>

<script>

  Polymer({
  	//classroom: "",
  	//dates: "",
  	//startendtime: "",
  	//cost: "",
  	//description: "",
  	//location: "",
    //courseid: "",
  	sessionid: "",
  	//gmap: "",
    publish: {
      closeSelector: '[affirmative],[dismissive]'
    },
    submitForm: function() {
      /*
    	this.$.register_form.actiontime = Date.now();
      var firstNameDom = this.$.register_form.first_name;
      if (typeof firstNameDom === "undefined") {
        var firstNameDom = document.getElementById('first_name');
      }
      var lastNameDom = this.$.register_form.last_name;
      if (typeof lastNameDom === "undefined") {
        var lastNameDom = document.getElementById('last_name');
      }
      var emailDom = this.$.register_form.email;
      if (typeof emailDom === "undefined") {
        var emailDom = document.getElementById('email');
      }
      var phoneDom = this.$.register_form.phone;
      if (typeof phoneDom === "undefined") {
        var phoneDom = document.getElementById('phone');
      }
    	firstNameDom.style.border = "";
    	lastNameDom.style.border = "";
    	emailDom.style.border = "";
    	phoneDom.style.border = "";
    	if (firstNameDom.value == "") {
    		firstNameDom.focus();
    		firstNameDom.style.border = "2px solid #ff8484";
    	}
    	else if (lastNameDom.value == "") {
    		lastNameDom.focus();
    		lastNameDom.style.border = "2px solid #ff8484";
    	}
    	else if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(emailDom.value) == false) {
    		emailDom.focus();
    		emailDom.style.border = "2px solid #ff8484";
    	}
    	else if (phoneDom.value == "") {
    		phoneDom.focus();
    		phoneDom.style.border = "2px solid #ff8484";
    	}
    	else {
    		this.$.register_form.submit();
	      this.$.scroller.style.display = "none";
    		this.$.register_buttons.style.display = "none";
    	}
      */
    },
    cancelForm: function() {
    	this.close();
    }
  });
</script>

</polymer-element>