<link href="../polymer/polymer.html" rel="import">
<link href="../paper-shadow/paper-shadow.html" rel="import">
<link rel="import" href="../../bower_components/ajax-form/ajax-form.html">

<link href="paper-dialog-base.html" rel="import">

<polymer-element name="session-action-dialog" extends="paper-dialog-base" role="dialog" layout vertical>

<template>

  <style>
    :host {
      background: #fff;
      color: rgba(0, 0, 0, 0.87);
      margin: 32px;
      overflow: visible !important;
    }

    h1 {
      font-size: 1.5em;
      font-weight: 300;
    }

	h4 {
		color:#666;
		font-weight: 400;
	}

    #scroller {
      overflow: auto;
      box-sizing: border-box;
      padding: 24px 24px 0 24px;
      max-width: 450px;
      width: 450px;
	  font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
    }

    #actions {
      padding: 16px;
    }

    #session-info-header {
    	margin-top:20px;
	}

	.info-content {
		font-size:0.8em;
	}

	.info-header {
		border-top:1px solid #d7d7d7;
	}

	.input-left {
		float:left;
		margin-right:10px;
	}

	.input-row {
		margin-top:10px;
	}

	.register_input {
		font-family: 'Lato', 'Helvetica Neue', Helvetica, Arial, Sans Serif;
		font-size:1em;
		width:170px;
		color: #555555;
		padding: 9px 8px 9px 8px;
	}

  </style>

  <paper-shadow z="3" fit></paper-shadow>

  <!-- need this because the host needs to be overflow: visible -->
  <div id="scroller" relative flex auto>
    <template if="{{heading}}">
      <h1>{{heading}}</h1>
    </template>

	<div id="session-info-header" class="info-header">
		<p><h4>Session Information</h4></p>
	</div>
	<div id="session-info-content" class="info-content">
		<p>
			<span id="detailed_session_type">{{classtype}}</span>
			<strong><span id="detailed_start">{{startdate}}</span></strong> to <strong><span id="detailed_end">{{startdate}}</span> 
			<span id="start_end_time">{{startendtime}}</span></strong></p>
		<p>
			<span id="detailed_description">{{description}}</span>
			<span id="detailed_location">{{location}}</span>
			<span id="detailed_cost">{{cost}}</span> (plus applicable taxes)
		</p>
	</div>
	<div class="info-header" id="provider-info-header">
		<p><h4>Provider Information</h4></p>
	</div>

	<div class="info-content">
		<p>
			<strong><span id="vendor_name">{{vendor_name}}</span></strong><br />
			<a href="http://{{vendor_url}}" target="_blank">{{vendor_url}}</a>
			<br />{{vendor_contact_email}}
			<br />{{vendor_contact_number}}
		</p>
	</div>

	<div class="info-header">
		<p><h4>Register</h4></p>
	</div>

	<form id="register_form" is="ajax-form" action="/register_session" method="post">
		<div>
			<div class="input-left">
				<input type="text" id="register-first-name" name="first_name" placeholder="First Name" class="register_input">
			</div>
			<div>
				<input type="text" id="register-last-name" name="last_name" placeholder="Last Name" class="register_input">
			</div>
		</div>
		<div class="input-row">
			<div class="input-left">
				<input type="email" id="register-email" name="email" placeholder="E-mail Address" class="register_input">
			</div>
			<div>
				<input type="text" id="register-phone" name="phone" placeholder="Phone: 1-999-999-9999" class="register_input">
			</div>
		</div>
	</form>

    <content select=":not([affirmative]):not([dismissive])"></content>
  </div>

  <div id="actions" relative layout horizontal>
    <content select="[dismissive]"></content>
    <div flex></div>
    <content select="[affirmative]"></content>
    <paper-button dismissive on-tap="{{cancelForm}}">Cancel</paper-button>
    <paper-button affirmative hover on-tap="{{submitForm}}">Register</paper-button>
  </div>
</template>

<script>

  Polymer({

  	classtype: "Classroom:",
  	startdate: "Mon Feb 1, 2014",
  	enddate: "Mon Feb 1, 2014",
  	startendtime: "(8:00 - 16:00)",
  	description: "This course is being offered.",
  	location: "888 W. Georgia St, Vancouver, BC",
  	cost: "$1200.00 CAD",
  	vendor_name: "National Project Management Inc.",
  	vendor_url: "npm.com",
  	vendor_contact_email: "some@where.com",
  	vendor_contact_number: "1-800-900-000",
    publish: {
      closeSelector: '[affirmative],[dismissive]'
    },
    submitForm: function() {
    	this.$.register_form.submit();
    	this.toggle();
    },
    cancelForm: function() {
    	this.toggle();
    }
  });

</script>

</polymer-element>